chrome.tabs.getCurrent(function(e){-1!==e.url.indexOf("newtab")}),window.onload=function(e){e&&!function(){function e(e){xe=(e.clientX-ze.x)/30,ve=(e.clientY-ze.y)/30}function t(){Be=new M(xe,ve);var e=new T;return e.lowerBound.Set(xe-.001,ve-.001),e.upperBound.Set(xe+.001,ve+.001),Se=null,H.QueryAABB(a,e),Se}function a(e){return e.GetBody().GetType()!=P.b2_staticBody&&e.GetShape().TestPoint(e.GetBody().GetTransform(),Be)?(Se=e.GetBody(),!1):!0}function i(e){for(var t=e,a="",i=0,r=0;"object"==typeof t&&"undefined"!=typeof t.tagName;)r+=t.offsetTop,i+=t.offsetLeft,a=t.tagName.toUpperCase(),"BODY"==a&&(t=0),"object"==typeof t&&"object"==typeof t.offsetParent&&(t=t.offsetParent);return{x:i,y:r}}var r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0);debug=!1;var s=[],n=[],c=void 0==localStorage.albumized_pref_bgcolor?"#101019":"#"+localStorage.albumized_pref_bgcolor,d=void 0==localStorage.albumized_pref_ballcolor?"#1A2433":"#"+localStorage.albumized_pref_ballcolor,l=void 0==localStorage.albumized_pref_density?1:parseFloat(localStorage.albumized_pref_density),h=void 0==localStorage.albumized_pref_friction?.3:parseFloat(localStorage.albumized_pref_friction),u=void 0==localStorage.albumized_pref_restitution?.3:parseFloat(localStorage.albumized_pref_restitution),m=void 0==localStorage.albumized_pref_gravity?9:parseInt(localStorage.albumized_pref_gravity),g=void 0==localStorage.albumized_pref_balltotal?18:parseInt(localStorage.albumized_pref_balltotal),k=void 0==localStorage.albumized_pref_sheep?!1:localStorage.albumized_pref_sheep;"true"===k&&$("header").addClass("sheep").attr("title","Kabob!"),$(window).resize(function(){for(r=$(window).width(),o=$(window).height(),q=document.getElementById("canvas-body"),q.width=2*r,q.height=2*o,O=q.getContext("2d"),O.scale(2,2),b=H.GetBodyList();b;b=b.GetNext())"ground"!=b.BoxNumber&&"right"!=b.BoxNumber||s.push(b);user_data="ground",ge.box({x:r/30/2,y:o/30+49,height:100,width:r/30,color:c,img_src:999,isStatic:!0}),user_data="right",ge.box({x:r/30+49,y:1e4/30/2,height:1e4/30,width:100,color:c,img_src:999,isStatic:!0})}),user_data=1;var y=0,w=document.getElementById("album1"),f=document.getElementById("album2"),p=document.getElementById("album3"),_=document.getElementById("album4"),x=document.getElementById("album5"),v=document.getElementById("album6"),B=document.getElementById("album7"),L=document.getElementById("album8"),S=document.getElementById("album9"),z=document.getElementById("album10"),D=document.getElementById("album11"),E=document.getElementById("album12"),I=document.getElementById("album13"),C=document.getElementById("album14"),G=document.getElementById("album15"),W=document.getElementById("album16"),A=document.getElementById("fro"),M=Box2D.Common.Math.b2Vec2,T=Box2D.Collision.b2AABB,F=Box2D.Dynamics.b2BodyDef,P=Box2D.Dynamics.b2Body,U=Box2D.Dynamics.b2FixtureDef,N=(Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2World),j=(Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape),R=Box2D.Collision.Shapes.b2CircleShape;Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.Joints.b2RevoluteJointDef,Box2D.Dynamics.Joints.b2MouseJointDef;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var J,q,H,K,O,V={},Y=!1;easterEggEnabled=!1;var Q,X,Z,ee,te,ae,ie,re,oe,se,ne,ce,de,le,he,ue,be="https://witness6.bandcamp.com/releases/?referer=Albumized!",me={start:function(e){this.defaultProperties(),this.canvas(e),ke.create.world(),ke.create.defaultFixture(),this.surroundings.leftWall(),this.surroundings.rightWall(),this.surroundings.ground(),this.callbacks(),this.displayPrefsLink();var t=document.getElementsByTagName("body")[0],a=document.getElementById("canvas-body");a.style.webkitTransition="background 0.2s ease",a.style.background=c;var i=new Konami;i.code=function(){easterEggEnabled=!0,console.log("Konami!"),easterEggEnabled&&(a.style.background="transparent url('/img/mattyice.jpg') repeat")},i.load(),t.style.webkitTransition="background 0.2s ease",t.style.background=c,600>r?total_random=5:total_random=g;for(var o=0;o<total_random;++o)user_data=o,ge.random();user_data=1001,ge.box({width:4.98,height:4.98,img_src:1001}),user_data=1002,ge.box({width:4.17,height:4.17,img_src:1002}),user_data=1003,ge.box({width:4.39,height:4.39,img_src:1003}),user_data=1004,ge.box({width:3.77,height:3.77,img_src:1004}),user_data=1005,ge.box({width:4.72,height:4.72,img_src:1005}),user_data=1006,ge.box({width:4.91,height:4.91,img_src:1006}),user_data=1007,ge.box({width:5.88,height:5.88,img_src:1007}),user_data=1008,ge.box({width:5.37,height:5.37,img_src:1008}),user_data=1009,ge.box({width:4.88,height:4.88,img_src:1009}),user_data=1010,ge.box({width:6,height:6,img_src:1010}),user_data=1011,ge.box({width:5.28,height:5.28,img_src:1011}),user_data=1012,ge.box({width:5.02,height:5.02,img_src:1012}),user_data=1013,ge.box({width:4.44,height:4.44,img_src:1013}),user_data=1014,ge.box({width:4.2,height:4.2,img_src:1014}),user_data=1015,ge.box({width:4.72,height:4.72,img_src:1015}),user_data=1016,ge.box({width:3.69,height:3.69,img_src:1016}),user_data=1017,ge.box({width:1.4,height:1.6,img_src:1017}),setTimeout(function(){!function e(){ye.step(),ye.update(),ye.draw(),requestAnimFrame(e)}()},166)},displayPrefsLink:function(){var e=chrome.extension.getURL("/options.html");$("a").click(function(){window.location=e})},getLocalizedLink:function(e){var t=chrome.i18n.getUILanguage()||"en-US",a="us";switch(t){case"ar":a="sa";break;case"am":a="bf";break;case"bg":a="bg";break;case"bn":a="in";break;case"ca":a="es";break;case"cs":a="cz";break;case"da":a="dk";break;case"de":a="de";break;case"el":a="gr";break;case"en":a="us";break;case"en_GB":a="gb";break;case"en_US":a="us";break;case"es":a="es";break;case"es_419":a="mx";break;case"et":a="ee";break;case"fa":a="us";break;case"fi":a="fi";break;case"fil":a="ph";break;case"fr":a="fr";break;case"he":a="il";break;case"hi":a="in";break;case"hr":a="hr";break;case"hu":a="hu";break;case"id":a="id";break;case"it":a="it";break;case"ja":a="jp";break;case"kn":a="in";break;case"ko":a="kr";break;case"lt":a="lt";break;case"lv":a="lv";break;case"ml":a="in";break;case"mr":a="in";break;case"ms":a="my";break;case"nl":a="nl";break;case"no":a="no";break;case"pl":a="pl";break;case"pt_BR":a="br";break;case"pt_PT":a="pt";break;case"ro":a="ro";break;case"ru":a="ru";break;case"sk":a="sk";break;case"sl":a="si";break;case"sr":a="si";break;case"sv":a="se";break;case"sw":a="tz";break;case"ta":a="in";break;case"te":a="in";break;case"th":a="th";break;case"tr":a="tr";break;case"uk":a="ua";break;case"vi":a="vn";break;case"zh_CN":a="cn";break;case"zh_TW":a="tw";break;default:a="us"}return e=e.replace(e.split("/")[3],a)+"&app=itunes&at=11l9uH"},itunesLookup:function(e){var e=e;16===e?($("h1").addClass("valentines"),$("h2").addClass("vday"),n=["love","valentine","cupid","love+stinks","arrow+heart","chocolate","hearts","heart","dozen+roses"]):1===e?($("h1").addClass("happy"),$("h2").addClass("newyear"),n=["2018","new+years+day"]):37===e?($("h1").addClass("merry"),$("h2").addClass("xmas"),n=["reindeer","celebrate+me+home","white+christmas","christmas","most+wonderful+time+of+the+year","christmas+tree","silent+night","merry+christmas","santa+claus","white+christmas","christmas","most+wonderful+time+of+the+year","christmas+tree","silent+night","merry+christmas"]):42===e?($("h1").addClass("hallo"),$("h2").addClass("ween"),n=["michael+myers","poltergeist","halloween","trick+or+treat","monster+mash","thriller","candy","thriller","ghoul"]):$.ajax({url:"https://raw.githubusercontent.com/rottina/albumized/master/lib/8fac666a0a596d41fe05ef3d83eca175.json",dataType:"json",async:!1,success:function(e){n=$.makeArray(e)},fail:function(){n=["100","1000","200","2129","300","400","500","600","700","800","901","M","I","K","E","W","U","Z","H","E","R","E"]}});var t=n[Math.floor(Math.random()*n.length)];$("h3").typed({strings:[t.replace(/\+/g," ")],cursorChar:"|",startDelay:808,typeSpeed:7});var a,i,r=/100x100/;$.getJSON("https://itunes.apple.com/search?media=music&entity=song&attribute=songTerm&limit=16&term="+encodeURIComponent(t),function(e){$.each(e,function(){$.each(this,function(e,t){switch(a=t.artworkUrl100.replace(r,"294x294"),i=t.collectionViewUrl,$("#album"+e).attr("src",a),e){case 0:Q=me.getLocalizedLink(i);break;case 1:X=me.getLocalizedLink(i);break;case 2:Z=me.getLocalizedLink(i);break;case 3:ee=me.getLocalizedLink(i);break;case 4:te=me.getLocalizedLink(i);break;case 5:ae=me.getLocalizedLink(i);break;case 6:ie=me.getLocalizedLink(i);break;case 7:re=me.getLocalizedLink(i);break;case 8:oe=me.getLocalizedLink(i);break;case 9:se=me.getLocalizedLink(i);break;case 10:ne=me.getLocalizedLink(i);break;case 11:ce=me.getLocalizedLink(i);break;case 12:de=me.getLocalizedLink(i);break;case 13:le=me.getLocalizedLink(i);break;case 14:he=me.getLocalizedLink(i);break;case 15:ue=me.getLocalizedLink(t.collectionViewUrl)}})})})},getDate:function(){var e,t=new Date,a=t.getMonth()+1,i=t.getDate();return e=1==a&&1==i?2:2==a&&14==i?16:10==a&&31==i?41:11==a&&27==i?38:12==a&&24==i?36:12==a&&25==i?37:0},defaultProperties:function(){J=30},canvas:function(e){q=document.getElementById(e),q.width=2*r,q.height=2*o,O=q.getContext("2d"),O.scale(2,2)},surroundings:{rightWall:function(){user_data="right",ge.box({x:r/30+49,y:1e4/30/2,height:1e4/30,width:100,color:c,img_src:999,isStatic:!0})},ground:function(){user_data="ground",ge.box({x:r/30/2,y:o/30+49,height:98.5,width:r/30,color:c,img_src:999,isStatic:!0})},leftWall:function(){user_data=3003,ge.box({x:.5,y:1e4/30/2,height:1e4/30,width:1,color:c,img_src:999,isStatic:!0})}},callbacks:function(){q.addEventListener("click",function(){},!1)}},ge={random:function(e){e=e||{},this.circle(e)},circle:function(e){e.radius=.5+1*Math.random();var t=new fe(e);V[t.id]=t,ke.addToWorld(t)},box:function(e){rand_box_size=2*Math.random()+1.5,e.width=e.width||rand_box_size,e.height=e.height||rand_box_size;var t=new pe(e);V[t.id]=t,ke.addToWorld(t)}},ke={addToWorld:function(e){var t=this.create.bodyDef(e),a=this.create.body(t);e.radius?this.create.fixtures.circle(a,e):this.create.fixtures.box(a,e)},create:{world:function(){H=new N(new M(0,m),!1)},defaultFixture:function(){K=new U,K.density=l,K.friction=h,K.restitution=u},bodyDef:function(e){var t=new F;return 1==e.isStatic?t.type=P.b2_staticBody:t.type=P.b2_dynamicBody,t.position.x=e.x,t.position.y=e.y,t.userData=e.id,t.angle=e.angle,t},body:function(e){return H.CreateBody(e)},fixtures:{circle:function(e,t){K.shape=new R(t.radius),e.BoxNumber=user_data,e.CreateFixture(K)},box:function(e,t){K.shape=new j,K.shape.SetAsBox(t.width/2,t.height/2),e.BoxNumber=user_data,e.CreateFixture(K)}}},get:{bodySpec:function(e){return{x:e.GetPosition().x,y:e.GetPosition().y,angle:e.GetAngle(),center:{x:e.GetWorldCenter().x,y:e.GetWorldCenter().y}}}}},ye={step:function(){var e=1/60;H.Step(e,10,10),H.ClearForces()},update:function(){for(var e in s)H.DestroyBody(s[e]),delete V[s[e].GetUserData()];s.length=0;for(var t=H.GetBodyList();t;t=t.m_next)t.IsActive()&&"undefined"!=typeof t.GetUserData()&&null!=t.GetUserData()&&V[t.GetUserData()].update(ke.get.bodySpec(t));Y=!0},draw:function(){if(Y){debug||O.clearRect(0,0,q.width,q.height);for(var e in V)V[e].draw(O);Y=!1}}},we=function(e){this.id=Math.round(1e6*Math.random()),random_x=Math.random()*(r-300)+300,random_x/=30,this.x=e.x||random_x-3,this.y=e.y||30*Math.random()-40,this.angle=0,this.color=e.color||d,this.center={x:null,y:null},this.isStatic=e.isStatic||!1,this.update=function(e){this.angle=e.angle,this.center=e.center,this.x=e.x,this.y=e.y}},fe=function(e){we.call(this,e),this.radius=e.radius||1,this.draw=function(){O.save(),O.translate(this.x*J,this.y*J),O.rotate(this.angle),O.translate(-this.x*J,-this.y*J),O.fillStyle=this.color,O.beginPath(),O.arc(this.x*J,this.y*J,this.radius*J,0,2*Math.PI,!0),O.closePath(),O.fill(),O.restore(),O.lineWidth=2,O.strokeStyle=c,O.stroke()}};fe.prototype=we;var pe=function(e){we.call(this,e),this.width=e.width||4.2,this.height=e.height||4.2,this.img_src=e.img_src,this.draw=function(){switch(O.save(),O.translate(this.x*J,this.y*J),O.rotate(this.angle),O.translate(-this.x*J,-this.y*J),O.fillStyle=this.color,O.lineWidth=2,O.strokeStyle=c,O.fillRect((this.x-this.width/2)*J,(this.y-this.height/2)*J,this.width*J,this.height*J),this.img_src){case 1001:img=w;break;case 1002:img=f;break;case 1003:img=p;break;case 1004:img=_;break;case 1005:img=x;break;case 1006:img=v;break;case 1007:img=B;break;case 1008:img=L;break;case 1009:img=S;break;case 1010:img=z;break;case 1011:img=D;break;case 1012:img=E;break;case 1013:img=I;break;case 1014:img=C;break;case 1015:img=G;break;case 1016:img=W;break;default:img=A}O.drawImage(img,(this.x-this.width/2)*J,(this.y-this.height/2)*J,this.width*J,this.height*J),O.strokeRect((this.x-this.width/2)*J,(this.y-this.height/2)*J,this.width*J,this.height*J),O.restore()}},_e=me.getDate()||0;me.itunesLookup(_e),pe.prototype=we,me.start("canvas-body");var xe,ve,Be,Le,Se,ze=i(document.getElementById("canvas-body")),De=document.getElementById("canvas-body");De.addEventListener("mousedown",function(a){if(Le=!0,e(a),De.addEventListener("mousemove",e,!0),body=t(),null!==Se){switch(Se.BoxNumber){case 1001:window.open(X,"_blank");break;case 1002:window.open(Z,"_blank");break;case 1003:window.open(ee,"_blank");break;case 1004:window.open(te,"_blank");break;case 1005:window.open(ae,"_blank");break;case 1006:window.open(ie,"_blank");break;case 1007:window.open(re,"_blank");break;case 1008:window.open(oe,"_blank");break;case 1009:window.open(se,"_blank");break;case 1010:window.open(ne,"_blank");break;case 1011:window.open(ce,"_blank");break;case 1012:window.open(de,"_blank");break;case 1013:window.open(le,"_blank");break;case 1014:window.open(he,"_blank");break;case 1015:window.open(ue,"_blank");break;case 1016:window.open(be,"_blank")}0==y?(ge.box({x:4e3/30/2,y:.5,height:1,width:4e3/30,color:c,img_src:999,isStatic:!0}),Se.ApplyImpulse({x:0,y:-300},body.GetWorldCenter()),y=1):1==y?Se.ApplyImpulse({x:0,y:-300},body.GetWorldCenter()):2==y?Se.ApplyImpulse({x:300,y:0},body.GetWorldCenter()):3==y?Se.ApplyImpulse({x:0,y:300},body.GetWorldCenter()):4==y&&Se.ApplyImpulse({x:-300,y:0},body.GetWorldCenter())}},!0),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",e,!0),Le=!1,xe=void 0,ve=void 0},!0)}()};